@model IEnumerable<_20232121_W2052838_PlanitGreen.Models.Tour>
@{
	ViewData["Title"] = "Search Results";
}
@section Scripts {
	<link rel="stylesheet" href="~/css/searchResults.css" asp-append-version="true" />
}

	<div class="search-results-container">
	<form asp-controller="Search" asp-action="SearchResults" method="get">
		<div class="search-bar-container">
			<input type="text" id="search-bar" name="searchQuery" class="search-bar" placeholder="Find your next green adventure..." value="@ViewData["SearchQuery"]">
			<button type="submit" id="search-btn" class="search-submit-btn" style="margin-left: 10px;">Search</button>
		</div>
	</form>

    <div class="filters-container">
        <form method="post" asp-controller="Search" asp-action="FilterAndSort">
            <input type="hidden" name="searchQuery" value="@ViewData["SearchQuery"]" /> <!-- Persist search query -->

            <label for="sort">Sort by</label>
            <select id="sort" name="sortOrder">
                <option value="ecoPoints">Eco Points: high to low</option>
                <option value="price-low">Price: low to high</option>
                <option value="price-high">Price: high to low</option>
            </select>

            <label for="startDate">Start Date</label>
            <input type="date" id="startDate" name="startDate" />

            <label for="endDate">End Date</label>
            <input type="date" id="endDate" name="endDate" />

            <label for="price">Price</label>
            <div class="price-container">
                <input type="number" id="minPrice" name="minPrice" placeholder="$ Min" step="0.01" />
                <input type="number" id="maxPrice" name="maxPrice" placeholder="$ Max" step="0.01" />
            </div>

            <label for="style">Style</label>
            <select id="style" name="style">
                <option value="adventure">Adventure</option>
                <option value="culture">Culture</option>
                <option value="wildlife">Wildlife</option>
                <option value="food">Food</option>
                <option value="leisure">Leisure</option>
            </select>

            <button type="submit">Apply Filters</button>
        </form>
    </div>

    <div class="trip-results">
        @if (Model != null && Model.Any())
        {
            @foreach (var tour in Model)
            {
                <div class="tour-card">
                    @if (tour.ImageList != null && tour.ImageList.Any())
                    {
                        <img src="@Url.Content(tour.ImageList.First().Path)" alt="Tour Image" class="tour-image">
                    }
                    <h3>@tour.TourName</h3>
                    <p>@tour.TourStyle.TourStyleName</p>
                    <p>@tour.Duration days</p>
                    <p>@tour.EcoPoints Eco Points</p>
                    <p>USD $ @tour.Price</p>

                    <button id="wishlist-btn"><img src="~/Images/Header/Wishlist-icon.png" alt="AddWishlist" class="icon">Add to my wishlist</button>
                </div>
            }
        }
        else
        {
            <p>No tours found matching your search criteria.</p>
        }
    </div>
    
		

	</div>
